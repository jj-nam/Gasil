<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="org.joonzis.mapper.GoWithMapper">
	<select id="getList" resultType="org.joonzis.domain.GoWithFlagVO">
		<![CDATA[
			select * from
				(tbl_goWith natural join tbl_country) natural join tbl_user 
			order by 
				wno desc
		]]>
	</select>
	
	<select id="getTotalcount" resultType="int">
		<![CDATA[
		select count(*) from tbl_goWith where wno > 0 
		]]>
	</select>
	
	<select id="getCountry" parameterType="String" resultType="org.joonzis.domain.CountryVO">
		select country from tbl_country where continent=#{continent} group by country
	</select>
	
	<select id="getCity" parameterType="String" resultType="org.joonzis.domain.CountryVO">
		select * from tbl_country where country=#{country}
	</select>
	
	<insert id="insert" parameterType="org.joonzis.domain.GoWithVO">
		insert into tbl_goWith(wno, user_id, wtitle, content, style, city, departure, arrive, r_cnt, p_cnt, people, reg_date, period, age)
		values(
			gowith_seq.nextval,
			#{user_id},
			#{wtitle},
			#{content},
			#{style},
			#{city},
			#{departure},
			#{arrive},
			0,
			#{p_cnt}, 
			#{people},
			sysdate,
			#{period},
			#{age}
			
		)
	</insert>
	
	<select id="get" parameterType="long" resultType="org.joonzis.domain.GoWithFlagVO">
		select * from (tbl_goWith natural join tbl_country) natural join tbl_user where wno = #{wno}
	</select>
	
	<delete id="remove" parameterType="long">
		delete from tbl_goWith where wno = #{wno}
	</delete>
	
</mapper>